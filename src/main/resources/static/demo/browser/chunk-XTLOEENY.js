import{a as _}from"./chunk-LPHYOPSK.js";import{a as H}from"./chunk-HZU4245N.js";import"./chunk-AQGG5LPX.js";import{Bb as v,Ha as U,Ka as d,La as F,Ma as S,Na as R,Oa as O,Pa as w,Qa as n,Ra as r,Sa as h,Ta as E,Ua as l,Va as b,W as g,Wa as s,Xa as c,Ya as p,_a as f,ca as D,da as y,ka as C,ta as P,wa as o,xa as k}from"./chunk-SV6CTXGA.js";var V=(a,x)=>x.id;function $(a,x){if(a&1){let e=E();n(0,"div",3),h(1,"img",4),n(2,"div",5)(3,"h3"),s(4),r(),n(5,"p",6),s(6),r(),n(7,"p",7),s(8),r(),n(9,"button",8),l("click",function(){let i=D(e).$implicit,m=b();return y(m.buildRecinto(i))}),s(10),r()()()}if(a&2){let e=x.$implicit,t=b();S("owned",t.isRecintoOwned(e.id)),o(),d("src","http://localhost:8080"+e.image,P)("alt",e.name),o(3),c(e.name),o(2),c(e.description),o(2),p("\u{1FA99} ",e.cost,""),o(),d("disabled",t.isRecintoOwned(e.id)||!t.canAfford(e.cost)),o(),p(" ",t.isRecintoOwned(e.id)?"Built":"Build"," ")}}var L=(()=>{class a{constructor(e){this.parkService=e,this.parkData=null,this.parkUpdated=new C,this.recintos=[]}ngOnInit(){this.loadRecintos()}loadRecintos(){this.parkService.getRecintos().subscribe({next:e=>{this.recintos=e,console.log(this.recintos[0].image)},error:e=>{console.error("Failed to load recintos:",e)}})}isRecintoOwned(e){return console.log(e+" desde lo tiene de recinto component"),this.parkData?.enclosureIds?.includes(e)||!1}canAfford(e){return(this.parkData?.coin||0)>=e}buildRecinto(e){this.parkData&&this.canAfford(e.cost)&&(this.parkData.coin-=e.cost,this.parkData.enclosureIds.push(e.id),this.parkService.updatePark(this.parkData).subscribe({next:()=>{this.parkUpdated.emit(this.parkData)},error:t=>{console.error("Failed to build recinto:",t)}}))}static{this.\u0275fac=function(t){return new(t||a)(k(_))}}static{this.\u0275cmp=g({type:a,selectors:[["recinto-list"]],inputs:{parkData:"parkData"},outputs:{parkUpdated:"parkUpdated"},standalone:!0,features:[f],decls:6,vars:0,consts:[[1,"recinto-section"],[1,"recinto-grid"],[1,"recinto-card",3,"owned"],[1,"recinto-card"],[1,"recinto-image",3,"src","alt"],[1,"recinto-info"],[1,"description"],[1,"cost"],[1,"build-button",3,"click","disabled"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"h2"),s(2,"Available Recintos"),r(),n(3,"div",1),O(4,$,11,9,"div",2,V),r()()),t&2&&(o(4),w(i.recintos))},dependencies:[v],styles:[".recinto-section[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:8px;box-shadow:0 2px 4px #0000001a}h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:#2c3e50}.recinto-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1.5rem}.recinto-card[_ngcontent-%COMP%]{border:1px solid #e1e1e1;border-radius:8px;overflow:hidden;transition:transform .2s}.recinto-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.recinto-card.owned[_ngcontent-%COMP%]{border-color:#3498db}.recinto-image[_ngcontent-%COMP%]{width:100%;height:160px;object-fit:cover}.recinto-info[_ngcontent-%COMP%]{padding:1rem}h3[_ngcontent-%COMP%]{margin:0;color:#2c3e50}.description[_ngcontent-%COMP%]{color:#666;font-size:.875rem;margin:.5rem 0}.cost[_ngcontent-%COMP%]{font-weight:700;color:#f1c40f;margin:.5rem 0}.build-button[_ngcontent-%COMP%]{width:100%;padding:.5rem;background:#3498db;color:#fff;border:none;border-radius:4px;cursor:pointer}.build-button[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}"]})}}return a})();function q(a,x){if(a&1){let e=E();n(0,"div",2),h(1,"img",3),n(2,"div",4)(3,"h3"),s(4),r(),n(5,"p",5),s(6),r(),n(7,"button",6),l("click",function(){D(e);let i=b();return y(i.handleEmergency(i.emergency))}),s(8),r()()()}if(a&2){let e=b();o(),d("src","http://localhost:8080"+e.emergency.image,P)("alt",e.emergency.name),o(3),c(e.emergency.name),o(2),p("Potential Loss: \u{1FA99} ",e.emergency.coinLost,""),o(),d("disabled",e.didntHandEmergency),o(),p(" ",e.didntHandEmergency?"Fixed":"Handle Emergency"," ")}}var T=(()=>{class a{constructor(e){this.parkService=e,this.parkData=null,this.parkUpdated=new C,this.isEmergencyHanddle=new C,this.didntHandEmergency=!1,this.emergency=null}ngOnInit(){this.loadEmergency()}loadEmergency(){this.parkService.getEmergency().subscribe({next:e=>{this.emergency=e,console.log("Emergency load",this.emergency)},error:e=>{console.error("Failed to load emergencies:",e)}})}handleEmergency(e){this.parkData&&(this.parkData.coin-e.coinLost<0?alert("You dont have  enough cash to fix the emergency :("):(this.parkData.coin-=e.coinLost,this.parkData.coin=parseFloat(this.parkData.coin.toFixed(2)),this.parkService.updatePark(this.parkData).subscribe({next:()=>{this.parkUpdated.emit(this.parkData),this.isEmergencyHanddle.emit(!0),this.didntHandEmergency=!0},error:t=>{console.error("Failed to handle emergency:",t)}})))}static{this.\u0275fac=function(t){return new(t||a)(k(_))}}static{this.\u0275cmp=g({type:a,selectors:[["emergency-list"]],inputs:{parkData:"parkData"},outputs:{parkUpdated:"parkUpdated",isEmergencyHanddle:"isEmergencyHanddle"},standalone:!0,features:[f],decls:5,vars:1,consts:[[1,"emergency-section"],[1,"emergency-grid"],[1,"emergency-card"],[1,"emergency-image",3,"src","alt"],[1,"emergency-info"],[1,"cost-warning"],[1,"handle-button",3,"click","disabled"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"h2"),s(2,"Emergency Situations"),r(),n(3,"div",1),U(4,q,9,6,"div",2),r()()),t&2&&(o(4),R(i.emergency!==null?4:-1))},dependencies:[v],styles:[".emergency-section[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:8px;box-shadow:0 2px 4px #0000001a;display:flex;flex-direction:column;align-items:center;justify-content:center}h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:#2c3e50}.emergency-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1.5rem}.emergency-card[_ngcontent-%COMP%]{border:1px solid #e74c3c;border-radius:8px;overflow:hidden;transition:transform .2s;background:#fff5f5}.emergency-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.emergency-image[_ngcontent-%COMP%]{width:100%;height:160px;object-fit:cover}.emergency-info[_ngcontent-%COMP%]{padding:1rem}h3[_ngcontent-%COMP%]{margin:0;color:#c0392b}.cost-warning[_ngcontent-%COMP%]{color:#e74c3c;font-weight:700;margin:.5rem 0}.handle-button[_ngcontent-%COMP%]{width:100%;padding:.5rem;background:#e74c3c;color:#fff;border:none;border-radius:4px;cursor:pointer;font-weight:700}.handle-button[_ngcontent-%COMP%]:hover{background:#c0392b}.handle-button[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}"]})}}return a})();var z=(()=>{class a{constructor(e){this.parkService=e,this.parkData=null,this.parkUpdated=new C,this.click=0,this.level=1,this.isEmergencyHandle=!1}ngOnInit(){this.parkData&&(console.log("Existe el park data"),this.parkData.dinosaurIds||(console.log("Inicializo los id de dinosa"),this.parkData.dinosaurIds=[]));let e=localStorage.getItem("click"),t=localStorage.getItem("level");t&&e?(this.click=parseInt(e),this.level=parseInt(t)):t&&!e?(this.click=0,this.level=parseInt(t)):!t&&e?(this.click=parseInt(e),this.level=0):(this.click=0,this.level=1)}onClickProgress(){if(this.click++,this.parkData){this.parkData.coin=(this.parkData.coin||0)+1;let m=100+2*this.parkData.dinosaurIds.length;if(this.parkData.coin+=m,!this.isEmergencyHandle){let u=this.parkData.coin*.15;console.warn(`Perdiste ${u.toFixed(2)} por no arreglar la emergencia`),this.parkData.coin-=u,this.parkData.coin<0&&(this.parkData.coin=0)}this.parkData.coin=parseFloat(this.parkData.coin.toFixed(2))}this.click%100===0&&(this.level++,alert(`\xA1Felicidades! Has alcanzado el nivel ${this.level}`)),localStorage.setItem("click",this.click.toString()),localStorage.setItem("level",this.level.toString()),console.log("Park updated:",this.parkData),this.parkUpdated.emit(this.parkData),this.parkService.updatePark(this.parkData).subscribe({next:()=>{console.log("Monedas actualizadas en el backend.")},error:e=>{console.error("Error al actualizar las monedas en el backend:",e)}})}getProgressPercentage(){if(!this.parkData)return 0;let e=100;return this.click%e/e*100}static{this.\u0275fac=function(t){return new(t||a)(k(_))}}static{this.\u0275cmp=g({type:a,selectors:[["click-progress"]],inputs:{parkData:"parkData",isEmergencyHandle:"isEmergencyHandle"},outputs:{parkUpdated:"parkUpdated"},standalone:!0,features:[f],decls:20,vars:4,consts:[[1,"click-section"],[1,"click-area",3,"click"],[1,"click-content"],[1,"stats"],[1,"stat"],[1,"label"],[1,"value"],[1,"progress-bar"],[1,"progress"],[1,"instruction"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"div",1),l("click",function(){return i.onClickProgress()}),n(2,"div",2)(3,"h2"),s(4,"Park Development"),r(),n(5,"div",3)(6,"div",4)(7,"span",5),s(8,"Level"),r(),n(9,"span",6),s(10),r()(),n(11,"div",4)(12,"span",5),s(13,"Total Clicks"),r(),n(14,"span",6),s(15),r()()(),n(16,"div",7),h(17,"div",8),r(),n(18,"p",9),s(19,"Click to develop your park!"),r()()()()),t&2&&(o(10),c(i.level),o(5),c(i.click),o(2),F("width",i.getProgressPercentage()+"%"))},dependencies:[v],styles:[".click-section[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:8px;box-shadow:0 2px 4px #0000001a}.click-area[_ngcontent-%COMP%]{background:linear-gradient(135deg,#2ecc71,#27ae60);border-radius:8px;padding:2rem;cursor:pointer;transition:transform .1s}.click-area[_ngcontent-%COMP%]:active{transform:scale(.98)}.click-content[_ngcontent-%COMP%]{text-align:center;color:#fff}h2[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:1.5rem}.stats[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:2rem;margin-bottom:1rem}.stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.label[_ngcontent-%COMP%]{font-size:.875rem;opacity:.9}.value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.progress-bar[_ngcontent-%COMP%]{background:#fff3;height:10px;border-radius:5px;margin:1rem 0;overflow:hidden}.progress[_ngcontent-%COMP%]{background:#fff;height:100%;transition:width .3s ease}.instruction[_ngcontent-%COMP%]{font-size:.875rem;opacity:.9}"]})}}return a})();var Y=(a,x)=>x.id;function B(a,x){if(a&1){let e=E();n(0,"div",3),h(1,"img",4),n(2,"div",5)(3,"h3"),s(4),r(),n(5,"p",6),s(6),r(),n(7,"p",7),s(8),r(),n(9,"button",8),l("click",function(){let i=D(e).$implicit,m=b();return y(m.buyDinosaur(i))}),s(10),r()()()}if(a&2){let e=x.$implicit,t=b();S("owned",t.isDinoOwned(e.id)),o(),d("src","http://localhost:8080/"+e.image,P)("alt",e.name),o(3),c(e.name),o(2),c(e.scientificName),o(2),p("\u{1FA99} ",e.cost,""),o(),d("disabled",t.isDinoOwned(e.id)||!t.canAfford(e.cost)||!t.hasRequiredRecinto(e.enclosure)),o(),p(" ",t.isDinoOwned(e.id)?"Owned":"Buy"," ")}}var j=(()=>{class a{constructor(e){this.parkService=e,this.parkData=null,this.parkUpdated=new C,this.dinosaurs=[]}ngOnInit(){this.loadDinosaurs()}loadDinosaurs(){this.parkService.getDinosaurs().subscribe({next:e=>{this.dinosaurs=e,console.log("Dinosaurs loaded:",this.dinosaurs)},error:e=>{console.error("Failed to load dinosaurs:",e)}})}isDinoOwned(e){return this.parkData?.dinosaurIds?.includes(e)||!1}canAfford(e){return(this.parkData?.coin||0)>=e}hasRequiredRecinto(e){return console.log(e+"desde hasrequired recinto de dinosaur"),this.parkData?.enclosureIds?.includes(e)||!1}buyDinosaur(e){this.parkData&&this.canAfford(e.cost)&&this.hasRequiredRecinto(e.enclosure)&&(this.parkData.coin-=e.cost,this.parkData.dinosaurIds.push(e.id),this.parkService.updatePark(this.parkData).subscribe({next:()=>{this.parkUpdated.emit(this.parkData)},error:t=>{console.error(t)}}))}static{this.\u0275fac=function(t){return new(t||a)(k(_))}}static{this.\u0275cmp=g({type:a,selectors:[["dinosaur-list"]],inputs:{parkData:"parkData"},outputs:{parkUpdated:"parkUpdated"},standalone:!0,features:[f],decls:6,vars:0,consts:[[1,"dinosaur-section"],[1,"dinosaur-grid"],[1,"dinosaur-card",3,"owned"],[1,"dinosaur-card"],[1,"dino-image",3,"src","alt"],[1,"dino-info"],[1,"scientific-name"],[1,"cost"],[1,"buy-button",3,"click","disabled"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"h2"),s(2,"Available Dinosaurs"),r(),n(3,"div",1),O(4,B,11,9,"div",2,Y),r()()),t&2&&(o(4),w(i.dinosaurs))},dependencies:[v],styles:[".dinosaur-section[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:8px;box-shadow:0 2px 4px #0000001a}h2[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:#2c3e50}.dinosaur-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:1.5rem}.dinosaur-card[_ngcontent-%COMP%]{border:1px solid #e1e1e1;border-radius:8px;overflow:hidden;transition:transform .2s}.dinosaur-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.dinosaur-card.owned[_ngcontent-%COMP%]{border-color:#2ecc71}.dino-image[_ngcontent-%COMP%]{width:100%;height:160px;object-fit:cover}.dino-info[_ngcontent-%COMP%]{padding:1rem}h3[_ngcontent-%COMP%]{margin:0;color:#2c3e50}.scientific-name[_ngcontent-%COMP%]{font-style:italic;color:#666;font-size:.875rem;margin:.5rem 0}.cost[_ngcontent-%COMP%]{font-weight:700;color:#f1c40f;margin:.5rem 0}.buy-button[_ngcontent-%COMP%]{width:100%;padding:.5rem;background:#2ecc71;color:#fff;border:none;border-radius:4px;cursor:pointer}.buy-button[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}"]})}}return a})();var A=(()=>{class a{constructor(){this.parkData=null}static{this.\u0275fac=function(t){return new(t||a)}}static{this.\u0275cmp=g({type:a,selectors:[["park-status"]],inputs:{parkData:"parkData"},standalone:!0,features:[f],decls:19,vars:3,consts:[[1,"status-card"],[1,"status-grid"],[1,"status-item"],[1,"label"],[1,"value"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"h2"),s(2,"Park Status"),r(),n(3,"div",1)(4,"div",2)(5,"span",3),s(6,"Dinosaurs"),r(),n(7,"span",4),s(8),r()(),n(9,"div",2)(10,"span",3),s(11,"Recintos"),r(),n(12,"span",4),s(13),r()(),n(14,"div",2)(15,"span",3),s(16,"Available Coins"),r(),n(17,"span",4),s(18),r()()()()),t&2&&(o(8),c((i.parkData==null||i.parkData.dinosaurIds==null?null:i.parkData.dinosaurIds.length)||0),o(5),c((i.parkData==null||i.parkData.enclosureIds==null?null:i.parkData.enclosureIds.length)||0),o(5),p("\u{1FA99} ",(i.parkData==null?null:i.parkData.coin)||0,""))},styles:[".status-card[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:8px;box-shadow:0 2px 4px #0000001a}h2[_ngcontent-%COMP%]{margin-bottom:1rem;color:#2c3e50}.status-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1rem}.status-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:1rem;background:#f8f9fa;border-radius:6px}.label[_ngcontent-%COMP%]{font-size:.875rem;color:#666;margin-bottom:.5rem}.value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#2c3e50}"]})}}return a})();var ye=(()=>{class a{constructor(e,t){this.parkService=e,this.authService=t,this.parkData=null,this.isEmergencyHandled=!1}ngOnInit(){this.loadParkData()}loadParkData(){this.parkService.getParkStatus().subscribe({next:e=>{console.error("Datos cargados desde el componente parque",e),this.parkData=e},error:e=>{console.error("Failed to load park data:",e)}})}onParkUpdated(e){this.parkData=e}logout(){this.authService.logout()}onEmergencyHandled(e){this.isEmergencyHandled=e}static{this.\u0275fac=function(t){return new(t||a)(k(_),k(H))}}static{this.\u0275cmp=g({type:a,selectors:[["park"]],standalone:!0,features:[f],decls:15,vars:8,consts:[[1,"park-container"],[1,"park-header"],[1,"coins"],["id","logout",3,"click"],[1,"park-content"],[3,"parkData"],[3,"parkUpdated","parkData","isEmergencyHandle"],[3,"parkUpdated","isEmergencyHanddle","parkData"],[1,"management-section"],[3,"parkUpdated","parkData"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"header",1)(2,"h1"),s(3),r(),n(4,"div",2),s(5),r(),n(6,"button",3),l("click",function(){return i.logout()}),s(7,"Logout"),r()(),n(8,"div",4),h(9,"park-status",5),n(10,"click-progress",6),l("parkUpdated",function(u){return i.onParkUpdated(u)}),r(),n(11,"emergency-list",7),l("parkUpdated",function(u){return i.onParkUpdated(u)})("isEmergencyHanddle",function(u){return i.onEmergencyHandled(u)}),r(),n(12,"div",8)(13,"dinosaur-list",9),l("parkUpdated",function(u){return i.onParkUpdated(u)}),r(),n(14,"recinto-list",9),l("parkUpdated",function(u){return i.onParkUpdated(u)}),r()()()()),t&2&&(o(3),c((i.parkData==null?null:i.parkData.name)||"My Jurassic Park"),o(2),p("\u{1FA99} ",(i.parkData==null?null:i.parkData.coin)||0," coins"),o(4),d("parkData",i.parkData),o(),d("parkData",i.parkData)("isEmergencyHandle",i.isEmergencyHandled),o(),d("parkData",i.parkData),o(2),d("parkData",i.parkData),o(),d("parkData",i.parkData))},dependencies:[v,L,T,z,j,A],styles:[".park-container[_ngcontent-%COMP%]{min-height:100vh;background:#f0f2f5;padding:2rem}#logout[_ngcontent-%COMP%]{padding:.75rem;background:#2a623d;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:1rem}.park-header[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:8px;box-shadow:0 2px 4px #0000001a;display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.coins[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:700;color:#f1c40f}.park-content[_ngcontent-%COMP%]{display:grid;gap:2rem}.management-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:2rem}@media (max-width: 768px){.park-container[_ngcontent-%COMP%]{padding:1rem}}"]})}}return a})();export{ye as ParkComponent};
