import{a as b}from"./chunk-VPX3QEWV.js";import{a as M}from"./chunk-YBQKBANH.js";import{$ as C,R as m,S as c,T as s,ea as v,f as u,h as l,j as f,ma as k,na as x,oa as w,pa as P,qa as p,r as n,ra as A,s as d,sa as S,y as h,z as g}from"./chunk-DORITJJS.js";var y=(()=>{class t{constructor(){this.title="JurasickPark"}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=d({type:t,selectors:[["app-root"]],standalone:!0,features:[C],decls:7,vars:0,consts:[[1,"header"],["routerLink","/profile","title","Profile Settings",1,"profile-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"]],template:function(e,i){e&1&&(m(0,"main")(1,"div",0)(2,"a",1),h(),m(3,"svg",2),s(4,"path",3)(5,"circle",4),c()()(),g(),s(6,"router-outlet"),c())},dependencies:[P,A],styles:["main[_ngcontent-%COMP%]{min-height:100vh;background-color:#f0f2f5}.header[_ngcontent-%COMP%]{position:fixed;top:1rem;right:1rem;z-index:100}.profile-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:#fff;border-radius:50%;box-shadow:0 2px 4px #0000001a;color:#2a623d;transition:transform .2s}.profile-icon[_ngcontent-%COMP%]:hover{transform:scale(1.05)}"]})}}return t})();var a=(t,r)=>{let o=n(M),e=n(p),i=o.getBanInfo();return console.warn("Ban info desde auth guard ",i),i?(e.navigate(["/banned"]),!1):r.url==="/"||o.isAuthenticated()?!0:(e.navigate(["/"]),!1)};var R=(t,r)=>{let o=n(b),e=n(p);return r.url==="/setup"?!0:o.getParkStatus().pipe(l(i=>i.name?!0:(console.log("Parque sin nombre, redirigiendo a /setup"),e.navigate(["/setup"]),!1)),f(()=>(e.navigate(["/setup"]),u(!1))))};var I=[{path:"login",loadComponent:()=>import("./chunk-AN5WECDN.js").then(t=>t.LoginComponent)},{path:"register",loadComponent:()=>import("./chunk-5UMNMIJS.js").then(t=>t.RegisterComponent)},{path:"park",loadComponent:()=>import("./chunk-XFSAS2GC.js").then(t=>t.ParkComponent),canActivate:[a]},{path:"setup",loadComponent:()=>import("./chunk-CT34WGVT.js").then(t=>t.CreateParkComponent),canActivate:[a,R]},{path:"profile",loadComponent:()=>import("./chunk-TOJOHNSG.js").then(t=>t.ProfileComponent),canActivate:[a]},{path:"banned",loadComponent:()=>import("./chunk-ADBRNR3N.js").then(t=>t.BannedComponent)},{path:"park-management",loadComponent:()=>import("./chunk-ULV2TL34.js").then(t=>t.ParkManagentComponent),canActivate:[a]},{path:"**",redirectTo:"login",pathMatch:"full"}];var B=(t,r)=>{if(t.url.includes("/auth/register")||t.url.includes("/auth/login"))return r(t);let o=localStorage.getItem("token");console.log("El token es del fronted "+o);let e=o?t.clone({setHeaders:{Authorization:`Bearer ${o}`},withCredentials:!0}):t.clone({withCredentials:!0});return r(e)};var G={providers:[v({eventCoalescing:!0}),S(I),k(x([B]))]};w(y,G).catch(t=>console.error(t));
